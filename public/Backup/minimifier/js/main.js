console.log("Author: LE DINH CUONG"),console.log("Website: dinhcuong.me"),console.log("Email: dinhcuong.firewin99@gmail.com"),console.log("Facebook: @ledhcg"),console.log("Instagram: @ledhcg"),console.log("-----------------------------------------"),console.log("-----------------------------------------"),console.log("----///--------///////---------//////----"),console.log("----///--------///---///-----///---------"),console.log("----///--------///----///---///----------"),console.log("----///--------///----///---///----------"),console.log("----///--------///---///-----///---------"),console.log("----////////---///////--------///////----"),console.log("-----------------------------------------"),console.log("-----------------------------------------"),console.log("Project: Mirea Form"),console.log("Verson: BETA");var firebaseConfig={apiKey:"AIzaSyC0hWE4guEcI63vPVvQv9vSpiCY37aXgtw",authDomain:"mirea-form-phieubaucu.firebaseapp.com",databaseURL:"https://mirea-form-phieubaucu.firebaseio.com",projectId:"mirea-form-phieubaucu",storageBucket:"mirea-form-phieubaucu.appspot.com",messagingSenderId:"15447096967",appId:"1:15447096967:web:c9ccd3749f316277194222",measurementId:"G-87PEQ8P6NK"};firebase.initializeApp(firebaseConfig);var personQuantityNeeded=0;function getQuantity(){var e="",o="";firebase.database().ref("quantity").on("value",function(n){var t=n.val();console.log("Quantity: ",t),o+=`Lỗi: Cần ${t.value_needed} thành viên được chọn`,personQuantityNeeded=t.value_needed,e+=`<strong>CÁCH THỨC BẦU CHỌN</strong></br> Lựa chọn ${t.value_needed} trong ${t.value_max} ứng viên phía dưới bằng cách ấn vào tên của họ. Bạn cần lựa chọn đủ, không thiếu không thừa thì mới có thể gửi phiếu đi. Để tránh số liệu ảo, chúng tôi chỉ cho phép bạn gửi đi một lần duy nhất.</p>`,document.getElementById("textTutorial").innerHTML=e,document.getElementById("notiErrorVotesForm").innerHTML=o})}checkValid();var sizeOfDataPerson=0;function showPerson(){var e="";firebase.database().ref("person").on("value",function(o){o.forEach(function(o){var n=o.val();e+=`<div class="form-group col">\n                        <input onclick="$(this).attr('value', this.checked ? 1 : 0)" type="checkbox" name="${n.input_id}" id="${n.input_id}"" class="checkbox-input" value="0"/>\n                        <label for="${n.input_id}" class="checkbox-label">\n                            <div class="checkbox-text">\n                                <p class="checkbox-text--title">${n.name}</p>\n                                <p class="checkbox-text--description">Ấn để <span class="un">bỏ</span> chọn!</p>\n                            </div>\n                        </label>\n                    </div>`}),sizeOfDataPerson=o.numChildren(),document.getElementById("showPerson").innerHTML=e,e=""})}function checkValid(){firebase.database().ref("check").on("value",function(e){e.val().key==localStorage.getItem("key")?showStop():(showPerson(),getQuantity(),document.getElementById("showArenaChoosePerson").innerHTML='<div class="input-group mb-3">\n                                                                                <div class="input-group-prepend">\n                                                                                <label class="input-group-text" for="inputGroupSelect01">Tên người bầu cử</label>\n                                                                                </div>\n                                                                                <select class="custom-select" id="inputGroupSelect01">\n                                                                                    \x3c!--Content--\x3e\n                                                                                </select>\n                                                                            </div>',showChooseName())})}function showStop(){document.getElementById("stop").innerHTML='<h1 class="title">Bạn đã bỏ phiếu thành công.</h1>'}var dataRef=firebase.database().ref("data");function submitForm(e){e.preventDefault();for(var o=0,n={},t={},a=1;a<=sizeOfDataPerson;a++){var s,c=getInputValue(s="person"+a);if(parseInt(c))t[s="person"+a]=s;n[s]=parseInt(c),o+=parseInt(c)}if(parseInt(getInputValue("inputGroupSelect01"))){var l=parseInt(getInputValue("inputGroupSelect01"));console.log("id",l)}else console.log("id",l),document.querySelector(".alertChooseName").style.display="block",setTimeout(function(){document.querySelector(".alertChooseName").style.display="none"},3e3);if(l)if(o===personQuantityNeeded){for(var i in t)update(i),console.log("Du lieu tu countVotes: ",i);saveData(n),firebase.database().ref("checkPerson/"+l).update({check:!0}),localStorage.setItem("key","20201031"),location.reload()}else document.querySelector(".alertError").style.display="block",setTimeout(function(){document.querySelector(".alertError").style.display="none"},3e3)}function getInputValue(e){return document.getElementById(e).value}function saveData(e){dataRef.push().set(e)}function updateCountVote(e){var o=0;firebase.database().ref("person").on("value",function(e){e.forEach(function(e){var n=e.val();o=parseInt(n.votes),console.log("VotesIn = ",o)})}),o+=1,console.log("VotesOut = ",o),firebase.database().ref("person/"+e).update({votes:o})}function update(e){var o=0;firebase.database().ref("countVotes").on("value",function(n){var t=n.val();o=parseInt(t[e]),console.log("VotesIn = ",o)}),o+=1;var n={};n[e]=o,console.log("VotesOut = ",o),firebase.database().ref("countVotes").update(n)}function showChooseName(){var e='<option value="0" selected>Chọn...</option>';firebase.database().ref("checkPerson").on("value",function(o){o.forEach(function(o){var n=o.val();n.check||(e+=`<option value="${n.id}">${n.name}</option>`)}),document.getElementById("inputGroupSelect01").innerHTML=e})}document.getElementById("mireaForm").addEventListener("submit",submitForm);