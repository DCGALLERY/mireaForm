var firebaseConfig={apiKey:"AIzaSyC0hWE4guEcI63vPVvQv9vSpiCY37aXgtw",authDomain:"mirea-form-phieubaucu.firebaseapp.com",databaseURL:"https://mirea-form-phieubaucu.firebaseio.com",projectId:"mirea-form-phieubaucu",storageBucket:"mirea-form-phieubaucu.appspot.com",messagingSenderId:"15447096967",appId:"1:15447096967:web:c9ccd3749f316277194222",measurementId:"G-87PEQ8P6NK"};function getDataVotes(){firebase.database().ref("data").on("value",function(e){e.forEach(function(e){var a=e.val();console.log(a)})})}function getDataPerson(){firebase.database().ref("person").on("value",function(e){e.forEach(function(e){var a=e.val();console.log(a)})})}firebase.initializeApp(firebaseConfig);var sizeOfDataPerson=0;function showTablePerson(){var e=0,a='  <th scope="col">#</th>\n                <th scope="col">ID Ẩn danh</th>',n="";firebase.database().ref("person").on("value",function(o){o.forEach(function(o){e++;var t=o.val();n+=`<tr>\n                    <th scope="row">${e}</th>\n                    <td>${t.name}</td>\n                    <td>${t.votes} (${t.percentage}%)</td>\n                    <td>\n                    \n                    <div class="progress" style="height: 15px;">\n                        <div class="progress-bar progress-striped" role="progressbar" style="width: ${t.percentage}%; text-align: left; padding-left:15px;" aria-valuenow="${t.percentage}" aria-valuemin="0" aria-valuemax="100"></div>\n                    </div>\n                    \n                    \n                    </td>\n                    </tr>`,a+=`<th scope="col">${t.name}</th>`}),sizeOfDataPerson=o.numChildren(),document.getElementById("tbodyPerson").innerHTML=n,document.getElementById("trVote").innerHTML=a,e=0,n="",a='  <th scope="col">#</th>\n                <th scope="col">ID Ẩn danh</th>'})}function changeText(e){return parseInt(e)?"Bỏ phiếu":"<strike>Trống</strike>"}function randomString(e){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*a.length));for(var n="mirea_",o=0;o<e;o++)n+=a[Math.floor(Math.random()*a.length)];return n}function showDataVotes(){var e=0,a="";firebase.database().ref("data").on("value",function(n){n.forEach(function(n){a+=` <tr>\n                    <th scope="row">${++e}</th>\n                    <td>${randomString(8)}</td>`;for(var o=n.val(),t=0;t<sizeOfDataPerson;t++){a+=`\n                        <td>${changeText(o["person"+(t+1)])}</td>`}a+="</tr>"}),document.getElementById("tbodyVote").innerHTML=a,a="",e=0})}function showResult(){console.log("test");var e=firebase.database().ref("person"),a=firebase.database().ref("data");e.on("value",function(e){e.forEach(function(e){e.key;console.log("Test22222222222222222: ",e.key);var n=e.val(),o=n.input_id,t=0,r=0;a.on("value",function(e){var a=e.numChildren();e.forEach(function(e){var s=e.val(),i=e.val();for(var c in console.log("TestACX: ",a),s){if(console.log("Person: ",c),console.log("checkInputID: ",o),t=parseInt(n.votes),r=parseInt(n.percentage),c===o){var l=i[c];console.log("Ketqua: ",l),parseInt(i[o])&&(t+=parseInt(i[o]),console.log("Ketqua234: ",t))}r=t/(3*a),console.log("%: ",r),console.log("V: ",t)}})})})})}showTablePerson(),showDataVotes();