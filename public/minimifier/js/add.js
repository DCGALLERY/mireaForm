var firebaseConfig={apiKey:"AIzaSyC0hWE4guEcI63vPVvQv9vSpiCY37aXgtw",authDomain:"mirea-form-phieubaucu.firebaseapp.com",databaseURL:"https://mirea-form-phieubaucu.firebaseio.com",projectId:"mirea-form-phieubaucu",storageBucket:"mirea-form-phieubaucu.appspot.com",messagingSenderId:"15447096967",appId:"1:15447096967:web:c9ccd3749f316277194222",measurementId:"G-87PEQ8P6NK"};function getInputValue(e){return document.getElementById(e).value}function submitAddPersonForm(e){e.preventDefault();var t=getInputValue("name"),a=getInputValue("input_id"),n=getInputValue("id");saveDataPerson(t,a,getInputValue("votes"),getInputValue("percentage"),n),saveDataCount(a,n),document.querySelector(".alertSuccessfully").style.display="block",setTimeout(function(){document.querySelector(".alertSuccessfully").style.display="none"},3e3)}function saveDataPerson(e,t,a,n,u){firebase.database().ref("person/person"+u).set({name:e,input_id:t,votes:a,percentage:n})}function saveDataCount(e){firebase.database().ref("count/"+e).set({input_id:e,votes:0})}function updateQuantity(){var e=getInputValue("value_max"),t=getInputValue("value_needed");console.log("Value: ",e,t),firebase.database().ref("quantity").set({value_max:parseInt(e),value_needed:parseInt(t)}),document.querySelector(".alertUpdateSuccessfully").style.display="block",setTimeout(function(){document.querySelector(".alertUpdateSuccessfully").style.display="none"},3e3)}function getDataPerson(){firebase.database().ref("person").on("value",function(e){e.forEach(function(e){var t=e.val();console.log(t)})})}firebase.initializeApp(firebaseConfig),document.getElementById("addPersonForm").addEventListener("submit",submitAddPersonForm),document.getElementById("updateQuantity").addEventListener("submit",updateQuantity),getDataPerson();var quantity_max=0,getDataQuantity=firebase.database().ref("quantity");function updateResult(){for(var e={},t=0,a=1;a<=quantity_max;a++){var n=getInputValue(u="person"+a);t+=parseInt(n),e[u]=parseInt(n)}e.total=parseInt(t),firebase.database().ref("countVotes").update(e),firebase.database().ref("person").on("value",function(e){e.forEach(function(e){e.val()})});for(a=1;a<=quantity_max;a++){var u="person"+a;firebase.database().ref("person/"+u).update({votes:e[u],percentage:(e[u]/e.total*100).toFixed(2)})}}function showPerson(){var e="";firebase.database().ref("person").on("value",function(t){t.forEach(function(t){var a=t.val();e+=`    <div class="form-group col">\n                            <label for="${a.input_id}">${a.name}</label>\n                            <input type="number" class="form-control" id="${a.input_id}" placeholder="${a.input_id}">\n                        </div>`}),document.getElementById("showPerson").innerHTML=e,e=""})}function addPersonMirea(e){e.preventDefault(),saveDataPersonMirea(getInputValue("name"),getInputValue("check"),getInputValue("id")),document.querySelector(".alertSuccessfully").style.display="block",setTimeout(function(){document.querySelector(".alertSuccessfully").style.display="none"},3e3)}function saveDataPersonMirea(e,t,a){firebase.database().ref("checkPerson/"+a).set({name:e,id:a,check:t})}getDataQuantity.on("value",function(e){var t=e.val();quantity_max=t.value_max}),document.getElementById("updateResult").addEventListener("submit",updateResult),showPerson(),document.getElementById("addPersonMirea").addEventListener("submit",addPersonMirea);